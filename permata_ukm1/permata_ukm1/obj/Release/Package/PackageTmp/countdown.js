function calcage(e, t, n) { s = (Math.floor(e / t) % n).toString(); if (LeadingZero && s.length < 2) s = "0" + s; return "<b>" + s + "</b>" } function CountBack(e) { if (e < 0) { document.getElementById("cntdwn").innerHTML = FinishMessage; return } DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(e, 86400, 1e5)); DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(e, 3600, 24)); DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(e, 60, 60)); DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(e, 1, 60)); document.getElementById("cntdwn").innerHTML = DisplayStr; if (CountActive) setTimeout("CountBack(" + (e + CountStepper) + ")", SetTimeOutPeriod) } function putspan(e, t) { document.write("<span id='cntdwn' style='background-color:" + e + "; color:" + t + "'></span>") } if (typeof BackColor == "undefined") BackColor = "white"; if (typeof ForeColor == "undefined") ForeColor = "black"; if (typeof TargetDate == "undefined") TargetDate = "12/31/2020 5:00 AM"; if (typeof DisplayFormat == "undefined") DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds."; if (typeof CountActive == "undefined") CountActive = true; if (typeof FinishMessage == "undefined") FinishMessage = ""; if (typeof CountStepper != "number") CountStepper = -1; if (typeof LeadingZero == "undefined") LeadingZero = true; CountStepper = Math.ceil(CountStepper); if (CountStepper == 0) CountActive = false; var SetTimeOutPeriod = (Math.abs(CountStepper) - 1) * 1e3 + 990; putspan(BackColor, ForeColor); var dthen = new Date(TargetDate); var dnow = new Date; if (CountStepper > 0) ddiff = new Date(dnow - dthen); else ddiff = new Date(dthen - dnow); gsecs = Math.floor(ddiff.valueOf() / 1e3); CountBack(gsecs)